# Iron Mule Stun(钢铁骡STUN版本)

像钢铁侠一样强大的eMule客户端。

## 简介

Iron Mule Stun（钢铁骡STUN版本）是基于 [zt8989](https://github.com/zt8989) 编写的【[Iron Mule(钢铁骡)](https://github.com/zt8989/IronMule) 】，进行二次开发的STUN穿透版本，其本身是基于NeoMule开发的eMule Mod，原有功能增加了包括IPv6(**支持有限**)和DLP反吸血保护。

本版本二次开发增加的功能是**内置了STUN穿透功能(目前暂不支持更换STUN公益服务器地址)**，可以自动帮助您获取eD2k网络中的高ID，极大提升文件传输效率！

## 原Mod更新日志 (change log)

+ **基础**: 基于NeoMule开发
+ **网络**: 支持IPv6协议
+ **安全**: 支持DLP反吸血保护

## 二次开发版本更新日志 (change log)
 **新功能**: 基于TCP STUN穿透实现在全锥型NAT (Full Cone NAT,NAT1)网络环境下获得高ID的能力，当映射关系发生变化时，会自动进行重启，并重新开始连接（利用启动后自动连接的功能）。

## 🚀 二开新功能：内置STUN穿透获取高ID

### 这个功能是做什么的？

在eMule中，拥有一个“高ID”就像拥有一个直接的门牌号，其他用户可以直接找到并连接你的电脑，从而带来更快的下载速度和资源查找能力。相比之下，“低ID”则像住在一个大院里没有独立门牌，别人很难直接联系到你，传输效率会低很多。

由于互联网“门牌号”（公网IPv4地址）数量有限，许多宽带运营商不再向普通用户单独分配，导致eMule网络中的“高ID”用户越来越少，影响了整体的连接效率。

然而，现在出现了一个转机！
一些地区的宽带运营商（如浙江移动等）虽然不提供独立的公网“门牌号”，但其网络架构采用了一种名为“全锥型NAT (Full Cone NAT,NAT1)”的技术。这种技术相当于为你提供了一个共享的公网“门牌号”+ 独立的“端口号”，外部用户仍然可以通过这个IP+端口直接找到并连接你的eMule客户端。

Iron Mule Stun版本正是利用了这一特性，让你在这种网络环境下也能获得“高ID”，显著提升连接效率。
**Iron Mule Stun 现在可以自动完成这个过程！** 它通过STUN技术探测你的公网IP和端口，利用全锥型NAT (Full Cone NAT,NAT1) 的特性（这里不赘述），并尝试通过UPNP自动在路由器上完成端口映射，让你轻松获得高ID。

### 🛠️ 使用此功能的前提条件

为了成功使用自动获取高ID功能，请确保满足以下**所有**条件：

1.  **运营商网络支持**：你的宽带运营商必须为你分配了“公网IP地址”，并且网络类型是“全锥型NAT (Full Cone NAT,NAT1) ”。（你可以联系运营商客服确认或先使用NAT类型检测网站后工具进行检测，确保是全锥型NAT (Full Cone NAT,NAT1) 网络环境。）
2.  **路由器支持UPNP**：你的路由器必须支持并开启了UPNP功能，并且路由器需要支持FullCone-NAT功能。
3.  **路由器功能要求**：路由器的UPNP实现必须允许将**内部端口和外部端口映射为不同的端口**。（例如OpenWRT等第三方固件通常支持）

### 📝 面向新手的详细设置指南

请严格按照以下步骤检查和设置你的网络环境：

#### 第1步：确认光猫工作模式（非常重要！）

- **场景A：光猫仅充当“光信号转换器”（桥接模式）**
    - 这是**最理想**的情况！你的主路由器负责拨号上网。在这种情况下，你只需要继续看第2步，在你的主路由器上进行设置即可。

- **场景B：光猫直接拨号上网（路由模式）**
    - 这是**最常见也最麻烦**的情况。光猫本身就是一个路由器，你的主路由器连接在光猫后面。
    - **问题**：UPNP和端口映射很难穿透两层路由器，导致自动获取高ID失败。
    - **解决方案（二选一）**：
        1.  **【最佳方案】获取光猫超管密码，改为桥接模式**：联系你的宽带运营商，要求他们提供超级管理员密码，并指导你修改，或者直接让运营商远程将光猫改为“桥接模式”，然后使用你自己的高性能路由器进行拨号。这是最根本、最稳定的解决方案。
        2.  **使用光猫的DMZ功能**：登录光猫的管理后台（需要超管密码，可向运营商索取或网上查找）但部分光猫可能只需要普通密码，这个需要自己确认，找到“DMZ主机”设置，将你的**主路由器的IP地址**设置为DMZ主机。这样，所有外部网络的请求都会直接被转发到你的主路由器上。
        

**我们强烈建议使用【路由器拨号】的方式，即“场景A”。**

#### 第2步：配置你的主路由器

1.  登录你的路由器管理界面（通常在浏览器输入 `192.168.1.1` 或 `192.168.0.1`）。
2.  找到“UPNP”设置项，确保其状态为 **“开启”** 或 **“启用”**。
3.  找到路由器的“**防火墙**”部分，确保“**启用FullCone-NAT**”功能。
完成以上步骤后，如果一切顺利，Iron Mule的连接状态应该会显示为 **“高ID”**。

---

## 免责声明

本软件基于Iron Mule（NeoMule），使用Ai大模型DeepSeek网页版进行指导开发，旨在学习和研究网络技术。请确保你遵守所在地区的法律法规，仅下载和分享你拥有合法权限的文件。并且请遵守运营商上传流量限制，避免因上传流量过大，导致运营商进行上传限速。